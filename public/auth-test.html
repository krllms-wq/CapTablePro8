<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Supabase Auth Test</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <style>body{font:16px system-ui,sans-serif;max-width:720px;margin:40px auto;padding:0 16px}</style>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  </head>
  <body>
    <h1>Supabase Auth Test</h1>
    <p>Страница для проверки входа без React/ENV.</p>

    <label>Email</label><br />
    <input id="email" type="email" placeholder="you@domain.com" style="width:100%;padding:12px;margin:6px 0 12px;border:1px solid #ccc;border-radius:8px" />

    <label>Пароль</label><br />
    <input id="pwd" type="password" placeholder="Test1234!" style="width:100%;padding:12px;margin:6px 0 12px;border:1px solid #ccc;border-radius:8px" />

    <div style="display:grid;gap:8px;margin:12px 0 16px">
      <button id="btn-signup">Зарегистрироваться (пароль)</button>
      <button id="btn-signin">Войти паролем</button>
      <button id="btn-magic">Отправить magic‑link</button>
    </div>

    <pre id="out" style="background:#f7f7f7;padding:12px;border-radius:8px;white-space:pre-wrap"></pre>

    <script>
      // ← ВСТАВЬ СВОИ ЗНАЧЕНИЯ между кавычками
      const SUPABASE_URL = 'https://injzfrduauoxmytfqkbl.supabase.co';
      const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImluanpmcmR1YXVveG15dGZxa2JsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU4ODc0NTUsImV4cCI6MjA3MTQ2MzQ1NX0.D0dVdgp8dCzuJbYGAQh-P8tJy5D-6LsMCR794b265f0';

      const client = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
      const out = document.getElementById('out');
      const log = (obj) => out.textContent = JSON.stringify(obj, null, 2);

      document.getElementById('btn-signup').onclick = async () => {
        const email = document.getElementById('email').value;
        const password = document.getElementById('pwd').value;
        const { data, error } = await client.auth.signUp({ email, password });
        log({ action: 'signup', data, error });
      };

      document.getElementById('btn-signin').onclick = async () => {
        const email = document.getElementById('email').value;
        const password = document.getElementById('pwd').value;
        const { data, error } = await client.auth.signInWithPassword({ email, password });
        log({ action: 'signin', data, error });
      };

      document.getElementById('btn-magic').onclick = async () => {
        const email = document.getElementById('email').value;
        const { data, error } = await client.auth.signInWithOtp({
          email,
          options: { shouldCreateUser: true, emailRedirectTo: 'https://captablepro8.pages.dev' }
        });
        log({ action: 'magic', data, error });
      };
    </script>
  </body>
</html>
